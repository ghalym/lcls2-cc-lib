
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>PLC Project (1): Library &#8212; pcdshub/lcls2-cc-lib  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Library.tmc" href="Library.tmc.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="plc-project-1-library">
<h1>PLC Project (1): Library<a class="headerlink" href="#plc-project-1-library" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Project</span> <span class="n">root</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">travis</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">pcdshub</span><span class="o">/</span><span class="n">lcls2</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">lib</span><span class="o">/</span><span class="n">lcls2</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">lib</span>
<span class="n">Project</span> <span class="n">path</span><span class="p">:</span> <span class="n">Library</span><span class="o">/</span><span class="n">Library</span><span class="o">.</span><span class="n">plcproj</span>
<span class="n">TMC</span> <span class="n">path</span><span class="p">:</span>     <span class="n">Library</span><span class="o">/</span><span class="n">Library</span><span class="o">.</span><span class="n">tmc</span>
<span class="n">AMS</span> <span class="n">ID</span><span class="p">:</span>       
<span class="n">IP</span> <span class="n">Address</span><span class="p">:</span>    <span class="p">(</span><span class="o">*</span> <span class="n">based</span> <span class="n">on</span> <span class="n">AMS</span> <span class="n">ID</span><span class="p">)</span>
<span class="n">Port</span><span class="p">:</span>         <span class="mi">851</span>

<span class="n">Source</span> <span class="n">files</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">ENUM_PPM_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">2.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">3.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_Gige</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">4.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_PowerMeter</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">5.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">6.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">7.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF_Laser</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">8.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_Filters</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">9.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">10.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">11.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_FilterWheel</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">12.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_Opal</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">13.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">14.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_L2SI_Flowmeter</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">15.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_XTES_Flowswitch</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">16.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Version</span><span class="o">/</span><span class="n">Global_Version</span><span class="o">.</span><span class="n">TcGVL</span>

<span class="n">GVLs</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">Global_Version</span>
</pre></div>
</div>
<div class="section" id="devices-ppm-enum-ppm-states-tcdut-tcplcobject">
<h2>Devices/PPM/ENUM_PPM_States.TcDUT (TcPlcObject)<a class="headerlink" href="#devices-ppm-enum-ppm-states-tcdut-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enum-ppm-states-declaration">
<h3>ENUM_PPM_States: Declaration<a class="headerlink" href="#enum-ppm-states-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_PPM_States :
(
    Unknown := 0,
    Out := 1,
    PowerMeter := 2,
    PolishedYag := 3,
    FrostedYag := 4
);
END_TYPE
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-ppm-fb-ppm-tcpou-tcplcobject">
<h2>Devices/PPM/FB_PPM.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-ppm-fb-ppm-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-ppm-declaration">
<h3>FB_PPM: Declaration<a class="headerlink" href="#fb-ppm-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM
VAR_IN_OUT
    stYStage: DUT_MotionStage;
END_VAR
VAR_INPUT
    fOut: LREAL;
    fPower: LREAL;
    fPolished: LREAL;
    fFrosted: LREAL;
END_VAR
VAR
    fbYStage: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: i
    &#39;}
    fbStates: FB_PPM_States;

    {attribute &#39;pytmc&#39; := &#39;
        pv: SPM
    &#39;}
    fbPowerMeter: FB_PPM_PowerMeter;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CAM
    &#39;}
    fbGige: FB_PPM_Gige;

    {attribute &#39;pytmc&#39; :=&#39;
        pv: SFM
    &#39;}
    fbFlowMeter: FB_L2SI_Flowmeter;

    {attribute &#39;pytmc&#39; := &#39;
        pv: YAG
        io: input
    &#39;}
    fbYagThermoCouple: FB_ThermoCouple;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-ppm-st">
<h3>FB_PPM: ST<a class="headerlink" href="#fb-ppm-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">fbYStage</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stYStage</span><span class="p">);</span>
<span class="n">fbStates</span><span class="p">(</span>
    <span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stYStage</span><span class="p">,</span>
    <span class="n">bEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">fOut</span><span class="o">:=</span><span class="n">fOut</span><span class="p">,</span>
    <span class="n">fPower</span><span class="o">:=</span><span class="n">fPower</span><span class="p">,</span>
    <span class="n">fPolished</span><span class="o">:=</span><span class="n">fPolished</span><span class="p">,</span>
    <span class="n">fFrosted</span><span class="o">:=</span><span class="n">fFrosted</span><span class="p">);</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">nEnableMode</span> <span class="o">:=</span> <span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">DURING_MOTION</span><span class="p">;</span>
<span class="n">fbPowerMeter</span><span class="p">();</span>
<span class="n">fbGige</span><span class="p">();</span>
<span class="n">fbFlowMeter</span><span class="p">();</span>
<span class="n">fbYagThermoCouple</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-ppm-fb-ppm-gige-tcpou-tcplcobject">
<h2>Devices/PPM/FB_PPM_Gige.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-ppm-fb-ppm-gige-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-ppm-gige-declaration">
<h3>FB_PPM_Gige: Declaration<a class="headerlink" href="#fb-ppm-gige-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM_Gige
VAR
    iIlluminatorINT AT %Q*: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: PWR
        ZNAM: OFF
        ONAM: ON
    &#39;}
    bGigePower AT %Q*: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CIL:PCT
        EGU: %
    &#39;}
    fIlluminatorPercent: LREAL;

    fbGetIllPercent: FB_AnalogInput;
    fbSetIllPercent: FB_AnalogOutput;

    bGigeInit: BOOL := FALSE;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-ppm-gige-st">
<h3>FB_PPM_Gige: ST<a class="headerlink" href="#fb-ppm-gige-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Turn</span> <span class="n">the</span> <span class="n">GigE</span> <span class="k">on</span> <span class="n">by</span> <span class="n">default</span>
<span class="k">IF</span> <span class="k">NOT</span> <span class="n">bGigeInit</span> <span class="k">THEN</span>
    <span class="n">bGigePower</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">bGigeInit</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="o">//</span> <span class="n">Illuminator</span> <span class="n">conversion</span> <span class="k">to</span> <span class="n">percentage</span>
<span class="n">fbSetIllPercent</span><span class="p">(</span>
    <span class="n">fReal</span><span class="o">:=</span><span class="n">fIlluminatorPercent</span><span class="p">,</span>
    <span class="n">fSafeMax</span><span class="o">:=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">fSafeMin</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">iTermBits</span><span class="o">:=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">fTermMax</span><span class="o">:=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">fTermMin</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">iRaw</span><span class="o">=&gt;</span><span class="n">iIlluminatorINT</span><span class="p">);</span>
<span class="n">fbGetIllPercent</span><span class="p">(</span>
    <span class="n">iRaw</span><span class="o">:=</span><span class="n">iIlluminatorINT</span><span class="p">,</span>
    <span class="n">iTermBits</span><span class="o">:=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">fTermMax</span><span class="o">:=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">fTermMin</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">fReal</span><span class="o">=&gt;</span><span class="n">fIlluminatorPercent</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-ppm-fb-ppm-powermeter-tcpou-tcplcobject">
<h2>Devices/PPM/FB_PPM_PowerMeter.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-ppm-fb-ppm-powermeter-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-ppm-powermeter-declaration">
<h3>FB_PPM_PowerMeter: Declaration<a class="headerlink" href="#fb-ppm-powermeter-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM_PowerMeter
VAR
    iVoltageINT AT %I*: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: VOLT
        io: input
    &#39;}
    fVoltage: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: VOLT_BUFFER
        io: input
    &#39;}
    fVoltageBuffer: ARRAY[1..1000] OF LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB
        io: input
    &#39;}
    fCalibBase: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB_BUFFER
        io: input
    &#39;}
    fCalibBaseBuffer: ARRAY[1..1000] OF LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MJ
        io: input
    &#39;}
    fCalibMJ: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MJ_BUFFER
        io: input
    &#39;}
    fCalibMJBuffer: ARRAY[1..1000] OF LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: STC
        io: input
    &#39;}
    fbThermoCouple: FB_ThermoCouple;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB:OFFSET
        io: io
    &#39;}
    fCalibRelOffset: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB:RATIO
        io: io
    &#39;}
    fCalibRelRatio: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB:MJ_RATIO
        io: io
    &#39;}
    fCalibMJRatio: LREAL;

    fbGetPMVoltage: FB_AnalogInput;
    fbVoltageBuffer: FB_LREALBuffer;
    fbCalibBaseBuffer: FB_LREALBuffer;
    fbCalibMJBuffer: FB_LREALBuffer;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-ppm-powermeter-st">
<h3>FB_PPM_PowerMeter: ST<a class="headerlink" href="#fb-ppm-powermeter-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">fbThermoCouple</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Convert</span> <span class="n">the</span> <span class="n">terminal</span><span class="na">&#39;s</span> <span class="kt">integer</span> <span class="n">into</span> <span class="n">a</span> <span class="n">value</span> <span class="k">in</span> <span class="n">volts</span>
<span class="n">fbGetPMVoltage</span><span class="p">(</span>
    <span class="n">iRaw</span> <span class="o">:=</span> <span class="n">iVoltageINT</span><span class="p">,</span>
    <span class="n">iTermBits</span> <span class="o">:=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">fTermMax</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">fTermMin</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">fReal</span> <span class="o">=&gt;</span> <span class="n">fVoltage</span><span class="p">);</span>

<span class="o">//</span> <span class="n">Power</span> <span class="n">meter</span> <span class="n">calibration</span>
<span class="n">fCalibBase</span> <span class="o">:=</span> <span class="p">(</span><span class="n">fVoltage</span> <span class="o">+</span> <span class="n">fCalibRelOffset</span><span class="p">)</span> <span class="o">*</span> <span class="n">fCalibRelRatio</span><span class="p">;</span>
<span class="n">fCalibMJ</span> <span class="o">:=</span> <span class="n">fCalibBase</span> <span class="o">*</span> <span class="n">fCalibMJRatio</span><span class="p">;</span>

<span class="o">//</span> <span class="k">Buffer</span> <span class="n">the</span> <span class="n">full</span><span class="o">-</span><span class="n">rate</span> <span class="n">Voltage</span> <span class="k">and</span> <span class="n">calibrated</span> <span class="n">MJ</span> <span class="n">values</span>
<span class="n">fbVoltageBuffer</span><span class="p">(</span>
    <span class="n">bExecute</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">fInput</span> <span class="o">:=</span> <span class="n">fVoltage</span><span class="p">,</span>
    <span class="n">arrOutput</span> <span class="o">=&gt;</span> <span class="n">fVoltageBuffer</span><span class="p">);</span>
<span class="n">fbCalibBaseBuffer</span><span class="p">(</span>
    <span class="n">bExecute</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">fInput</span> <span class="o">:=</span> <span class="n">fCalibBase</span><span class="p">,</span>
    <span class="n">arrOutput</span> <span class="o">=&gt;</span> <span class="n">fCalibBaseBuffer</span><span class="p">);</span>
<span class="n">fbCalibMJBuffer</span><span class="p">(</span>
    <span class="n">bExecute</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">fInput</span> <span class="o">:=</span> <span class="n">fCalibMJ</span><span class="p">,</span>
    <span class="n">arrOutput</span> <span class="o">=&gt;</span> <span class="n">fCalibMJBuffer</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-ppm-fb-ppm-states-tcpou-tcplcobject">
<h2>Devices/PPM/FB_PPM_States.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-ppm-fb-ppm-states-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-ppm-states-declaration">
<h3>FB_PPM_States: Declaration<a class="headerlink" href="#fb-ppm-states-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM_States
VAR_IN_OUT
    stMotionStage: DUT_MotionStage;
END_VAR
VAR_INPUT
    bEnable: BOOL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_PPM_states;
    bStatesLock: BOOL;
    fOut: LREAL;
    fPower: LREAL;
    fPolished: LREAL;
    fFrosted: LREAL;
END_VAR
VAR_OUTPUT
    bError: BOOL;
    sErrorMessage: STRING;
    bBusy: BOOL;
    bDone: BOOL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_PPM_States;
END_VAR
VAR
    bInit: BOOL;
    arrStates: ARRAY[1..15] OF DUT_PositionState;
    nIter: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv:
        io: io
    &#39;}
    fbStateManager: FB_PositionStateManager;

    fbLockOut: FB_PositionStateLock;
    fbLockPowerMeter: FB_PositionStateLock;
    fbLockPolishedYag: FB_PositionStateLock;
    fbLockFrostedYag: FB_PositionStateLock;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 0.1;
    fOutDelta: LREAL := 10;
    fInVelocity: LREAL := 80;
    fOutVelocity: LREAL := 65;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-ppm-states-st">
<h3>FB_PPM_States: ST<a class="headerlink" href="#fb-ppm-states-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">IF</span> <span class="k">NOT</span> <span class="n">bInit</span> <span class="k">THEN</span>
    <span class="n">bInit</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
    <span class="k">FOR</span> <span class="n">nIter</span> <span class="o">:=</span> <span class="mi">1</span> <span class="k">TO</span> <span class="mi">4</span> <span class="n">DO</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fDelta</span> <span class="o">:=</span> <span class="n">fInDelta</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="n">fInVelocity</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fAccel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fDecel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">bLocked</span> <span class="o">:=</span> <span class="n">bStatesLock</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">bValid</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">TODO</span> <span class="n">implement</span> <span class="n">PMPS</span> <span class="n">instead</span> <span class="k">of</span> <span class="n">doing</span> <span class="n">this</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">bMoveOk</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">END_FOR</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;Out</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fOut</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fDelta</span> <span class="o">:=</span> <span class="n">fOutDelta</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="n">fOutVelocity</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fDecel</span> <span class="o">:=</span> <span class="n">fOutDecel</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;PowerMeter</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fPower</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;PolishedYag</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fPolished</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;FrostedYag</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fFrosted</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="n">fbLockOut</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="n">fbLockPowerMeter</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="n">fbLockPolishedYag</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="n">fbLockFrostedYag</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>

<span class="n">fbStateManager</span><span class="p">(</span>
    <span class="n">stMotionStage</span> <span class="o">:=</span> <span class="n">stMotionStage</span><span class="p">,</span>
    <span class="n">arrStates</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">,</span>
    <span class="n">setState</span> <span class="o">:=</span> <span class="n">enumSet</span><span class="p">,</span>
    <span class="n">bEnable</span> <span class="o">:=</span> <span class="n">bEnable</span><span class="p">,</span>
    <span class="n">bError</span> <span class="o">=&gt;</span> <span class="n">bError</span><span class="p">,</span>
    <span class="n">sErrorMessage</span> <span class="o">=&gt;</span> <span class="n">sErrorMessage</span><span class="p">,</span>
    <span class="n">bBusy</span> <span class="o">=&gt;</span> <span class="n">bBusy</span><span class="p">,</span>
    <span class="n">bDone</span> <span class="o">=&gt;</span> <span class="n">bDone</span><span class="p">,</span>
    <span class="n">getState</span> <span class="o">=&gt;</span> <span class="n">enumGet</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-ref-fb-ref-tcpou-tcplcobject">
<h2>Devices/REF/FB_REF.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-ref-fb-ref-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-ref-declaration">
<h3>FB_REF: Declaration<a class="headerlink" href="#fb-ref-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_REF
VAR_IN_OUT
    stYStage: DUT_MotionStage;
END_VAR
VAR_INPUT
    fIn: LREAL;
    fOut: LREAL;
END_VAR
VAR
    fbYStage: FB_MotionStage;
    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: io
    &#39;}
    fbStates: FB_EpicsInOut;

    {attribute &#39;pytmc&#39; := &#39;
        pv: LAS
        io: io
    &#39;}
    fbLaser: FB_REF_Laser;

    bInit: BOOL;
    stOut: DUT_PositionState;
    stIn: DUT_PositionState;
END_VAR
VAR CONSTANT
    bStatesLock: BOOL;
    fVelo: LREAL := 65;
    fAccel: LREAL := 25;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-ref-st">
<h3>FB_REF: ST<a class="headerlink" href="#fb-ref-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">IF</span> <span class="k">NOT</span> <span class="n">bInit</span> <span class="k">THEN</span>
    <span class="n">bInit</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fOut</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">fDelta</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="n">fVelo</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">fAccel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">fDecel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">bLocked</span> <span class="o">:=</span> <span class="n">bStatesLock</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">bValid</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">stOut</span><span class="p">.</span><span class="n">bMoveOk</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

    <span class="n">stIn</span><span class="p">.</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fIn</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">fDelta</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="n">fVelo</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">fAccel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">fDecel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">bLocked</span> <span class="o">:=</span> <span class="n">bStatesLock</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">bValid</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">stIn</span><span class="p">.</span><span class="n">bMoveOk</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="n">fbYStage</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stYStage</span><span class="p">);</span>
<span class="n">fbStates</span><span class="p">(</span>
    <span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stYStage</span><span class="p">,</span>
    <span class="n">stOut</span> <span class="o">:=</span> <span class="n">stOut</span><span class="p">,</span>
    <span class="n">stIn</span> <span class="o">:=</span> <span class="n">stIn</span><span class="p">);</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">nEnableMode</span> <span class="o">:=</span> <span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">DURING_MOTION</span><span class="p">;</span>
<span class="n">fbLaser</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-ref-fb-ref-laser-tcpou-tcplcobject">
<h2>Devices/REF/FB_REF_Laser.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-ref-fb-ref-laser-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-ref-laser-declaration">
<h3>FB_REF_Laser: Declaration<a class="headerlink" href="#fb-ref-laser-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_REF_Laser
VAR_INPUT
    bShutdown: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: PCT
        io: io
    &#39;}
    fLaserPercent: LREAL;
END_VAR
VAR
    iShutdownINT AT %Q*: INT;
    iLaserINT AT %Q*: INT;

    fbGetLasPercent: FB_AnalogInput;
    fbSetLasPercent: FB_AnalogOutput;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-ref-laser-st">
<h3>FB_REF_Laser: ST<a class="headerlink" href="#fb-ref-laser-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Send</span> <span class="mi">5</span><span class="n">V</span> <span class="k">to</span> <span class="n">suppress</span> <span class="n">laser</span>
<span class="k">IF</span> <span class="n">bShutdown</span> <span class="k">THEN</span>
    <span class="n">iShutdownINT</span> <span class="o">:=</span> <span class="n">LREAL_TO_INT</span><span class="p">(</span><span class="n">EXPT</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">14</span><span class="p">));</span>
<span class="k">ELSE</span>
    <span class="n">iShutdownINT</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="o">//</span> <span class="n">Limit</span> <span class="k">to</span> <span class="mi">0</span><span class="o">-</span><span class="mi">5</span><span class="n">V</span> <span class="n">instead</span> <span class="k">of</span> <span class="mi">10</span><span class="n">V</span>
<span class="n">fbSetLasPercent</span><span class="p">(</span>
    <span class="n">fReal</span><span class="o">:=</span><span class="n">fLaserPercent</span><span class="p">,</span>
    <span class="n">fSafeMax</span><span class="o">:=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">fSafeMin</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">iTermBits</span><span class="o">:=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">fTermMax</span><span class="o">:=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">fTermMin</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">iRaw</span><span class="o">=&gt;</span><span class="n">iLaserInt</span><span class="p">);</span>
<span class="n">fbGetLasPercent</span><span class="p">(</span>
    <span class="n">iRaw</span><span class="o">:=</span><span class="n">iLaserInt</span><span class="p">,</span>
    <span class="n">iTermBits</span><span class="o">:=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">fTermMax</span><span class="o">:=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">fTermMin</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">fReal</span><span class="o">=&gt;</span><span class="n">fLaserPercent</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-xpim-enum-xpim-filters-tcdut-tcplcobject">
<h2>Devices/XPIM/ENUM_XPIM_Filters.TcDUT (TcPlcObject)<a class="headerlink" href="#devices-xpim-enum-xpim-filters-tcdut-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enum-xpim-filters-declaration">
<h3>ENUM_XPIM_Filters: Declaration<a class="headerlink" href="#enum-xpim-filters-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_XPIM_Filters :
(
    Unknown := 0,
    T50 := 1,
    T25 := 2,
    T10 := 3,
    T5 := 4,
    T1 := 5,
    T100 := 6
);
END_TYPE
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-xpim-enum-xpim-states-tcdut-tcplcobject">
<h2>Devices/XPIM/ENUM_XPIM_States.TcDUT (TcPlcObject)<a class="headerlink" href="#devices-xpim-enum-xpim-states-tcdut-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enum-xpim-states-declaration">
<h3>ENUM_XPIM_States: Declaration<a class="headerlink" href="#enum-xpim-states-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_XPIM_States :
(
    Unknown := 0,
    Out := 1,
    Yag := 2,
    Diamond := 3,
    Reticle := 4
);
END_TYPE
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-xpim-fb-xpim-tcpou-tcplcobject">
<h2>Devices/XPIM/FB_XPIM.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-xpim-fb-xpim-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-xpim-declaration">
<h3>FB_XPIM: Declaration<a class="headerlink" href="#fb-xpim-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    stZoomStage: DUT_MotionStage;
    stFocusStage: DUT_MotionStage;
    stEl6In: EL6inData22b;
    stEl6Out: EL6OutData22b;
END_VAR
VAR_INPUT
    bZoomEndFwd AT %I*: BOOL;
    bZoomEndBwd AT %I*: BOOL;
    bFocusEndFwd AT %I*: BOOL;
    bFocusEndBwd AT %I*: BOOL;

    fYag: LREAL;
    fDiamond: LREAL;
    fReticle: LREAL;
    fOut: LREAL;
END_VAR
VAR
    fbYStage: FB_MotionStage;
    fbZoom: FB_MotionStage;
    fbFocus: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: io
    &#39;}
    fbStates: FB_XPIM_States;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MFW
    &#39;}
    fbFilterWheel: FB_XPIM_FilterWheel;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CAM
    &#39;}
    fbOpal: FB_XPIM_Opal;

    {attribute &#39;pytmc&#39; := &#39;
        pv: SFW
    &#39;}
    fbFlowSwitch: FB_XTES_Flowswitch;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-xpim-st">
<h3>FB_XPIM: ST<a class="headerlink" href="#fb-xpim-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">fbYStage</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stYStage</span><span class="p">);</span>
<span class="o">//</span> <span class="k">All</span> <span class="n">stages</span> <span class="n">have</span> <span class="n">no</span> <span class="n">STO</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">stZoomStage</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">stFocusStage</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="o">//</span> <span class="n">No</span> <span class="n">limit</span> <span class="n">switch</span> <span class="n">at</span> <span class="n">the</span> <span class="n">bottom</span>
<span class="n">stYStage</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="o">//</span> <span class="n">Lens</span> <span class="n">limits</span> <span class="n">are</span> <span class="n">normally</span> <span class="k">open</span>
<span class="n">stZoomStage</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="k">NOT</span> <span class="n">bZoomEndFwd</span><span class="p">;</span>
<span class="n">stZoomStage</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="k">NOT</span> <span class="n">bZoomEndBwd</span><span class="p">;</span>
<span class="n">stFocusStage</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="k">NOT</span> <span class="n">bFocusEndFwd</span><span class="p">;</span>
<span class="n">stFocusStage</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="k">NOT</span> <span class="n">bFocusEndBwd</span><span class="p">;</span>
<span class="o">//</span> <span class="n">Home</span> <span class="n">Lens</span> <span class="k">to</span> <span class="n">LLS</span>
<span class="n">stZoomStage</span><span class="p">.</span><span class="n">nHomingMode</span> <span class="o">:=</span> <span class="n">ENUM_EpicsHomeCmd</span><span class="p">.</span><span class="n">LOW_LIMIT</span><span class="p">;</span>
<span class="n">stFocusStage</span><span class="p">.</span><span class="n">nHomingMode</span> <span class="o">:=</span> <span class="n">ENUM_EpicsHomeCmd</span><span class="p">.</span><span class="n">LOW_LIMIT</span><span class="p">;</span>
<span class="n">fbStates</span><span class="p">(</span>
    <span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stYStage</span><span class="p">,</span>
    <span class="n">fYag</span><span class="o">:=</span><span class="n">fYag</span><span class="p">,</span>
    <span class="n">fDiamond</span><span class="o">:=</span><span class="n">fDiamond</span><span class="p">,</span>
    <span class="n">fReticle</span><span class="o">:=</span><span class="n">fReticle</span><span class="p">,</span>
    <span class="n">fOut</span><span class="o">:=</span><span class="n">fOut</span><span class="p">);</span>
<span class="n">fbZoom</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stZoomStage</span><span class="p">);</span>
<span class="n">fbFocus</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">stFocusStage</span><span class="p">);</span>
<span class="n">fbFilterWheel</span><span class="p">(</span>
    <span class="n">bExecute</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span>
    <span class="n">stIn_El6</span><span class="o">:=</span><span class="n">stEl6In</span><span class="p">,</span>
    <span class="n">stOut_El6</span><span class="o">:=</span><span class="n">stEl6Out</span><span class="p">);</span>
<span class="n">fbOpal</span><span class="p">();</span>
<span class="n">fbFlowSwitch</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-xpim-fb-xpim-filterwheel-tcpou-tcplcobject">
<h2>Devices/XPIM/FB_XPIM_FilterWheel.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-xpim-fb-xpim-filterwheel-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-xpim-filterwheel-declaration">
<h3>FB_XPIM_FilterWheel: Declaration<a class="headerlink" href="#fb-xpim-filterwheel-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_FilterWheel
VAR_INPUT
    bExecute: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: ERR:RESET
        io: output
    &#39;}
    bResetError: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    nSetPos: ENUM_XPIM_States;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    nGetPos: ENUM_XPIM_States;
    bBusy: BOOL;
    bError: BOOL;
    sError: STRING;
    {attribute &#39;pytmc&#39; := &#39;
        pv: ERR:MSG
        io: input
    &#39;}
    sLastError: STRING;
    sErrorTS: STRING;
END_VAR
VAR_IN_OUT
    stIn_EL6: EL6inData22B;
    stOut_EL6: EL6outData22B;
END_VAR
VAR
    {attribute &#39;pytmc&#39; := &#39;
        pv: RAW
    &#39;}
    fbCom: FB_EL6_COM;

    nStep: USINT;
    sLastTestCmd: STRING;
    bIsTest: BOOL;
    fbGetTime: NT_GetTime;
    bStopOnErr: BOOL;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-xpim-filterwheel-st">
<h3>FB_XPIM_FilterWheel: ST<a class="headerlink" href="#fb-xpim-filterwheel-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>fbCom.sSendSuffix := &#39;$R&#39;;
fbCom.sRecvSuffix := &#39;$R&#39;;

IF bExecute AND nStep = 0 THEN
    IF bResetError OR NOT bError THEN
        nStep := 10;
    END_IF
ELSIF NOT bExecute THEN
    nStep := 0;
END_IF
CASE nStep OF
    0:
        ; // idle
    10:
        // Get position
        bIsTest := FALSE;
        fbCom(sCmd:=&#39;pos?&#39;,
            bSend:=TRUE,
            stIn_EL6:=stIn_EL6,
            stOut_EL6:=stOut_EL6);
        nStep := nStep + 10;
    20:
        // Wait for response and set variables
        fbCom(stIn_EL6:=stIn_EL6,
            stOut_EL6:=stOut_EL6);
        IF fbCom.bDone THEN
            bError := FALSE;
            sError := &#39;&#39;;
            nGetPos := STRING_TO_USINT(fbCom.sResponse);
            nSetPos := nGetPos;
            nStep := nStep + 10;
            IF nGetPos = 0 THEN
                sError := &#39;Filter wheel in invalid state&#39;;
                bStopOnErr := TRUE;
                nStep := 50;
            END_IF
        END_IF
    30:
        // Wait for a move request
        IF nSetPos &lt;&gt; nGetPos THEN
            fbCom(sCmd:=CONCAT(&#39;pos=&#39;, INT_TO_STRING(nSetPos)),
                bSend:=TRUE,
                stIn_EL6:=stIn_EL6,
                stOut_EL6:=stOut_EL6);
            nStep := nStep + 10;
            bBusy := TRUE;
        END_IF
    40:
        fbCom(stIn_EL6:=stIn_EL6,
            stOut_EL6:=stOut_EL6);
        // Wait for move to be done
        IF fbCom.bDone THEN
            bBusy := FALSE;
            nStep := 10;
            // Handle setpoint error
            IF fbCom.sResponse = &#39;Command error CMD_ARG_INVALID$N$R&#39; THEN
                sError := &#39;Invalid set position&#39;;
                nStep := 50;
            END_IF
        END_IF
    50:
        // Set sError and then jump here for standard handling
        sLastError := sError;
        bError := TRUE;
        fbGetTime(NETID:=&#39;&#39;,
            START:=TRUE);
        nStep := nStep + 10;
    60:
        // Error handling continued
        fbGetTime();
        IF NOT fbGetTime.BUSY THEN
            sErrorTS := SYSTEMTIME_TO_STRING(fbGetTime.TIMESTR);
            fbGetTime.START := FALSE;
            // set bStopOnErr to TRUE if it was a major error
            IF bStopOnErr THEN
                nStep := 0;
            ELSE
                nStep := 10;
            END_IF
            bStopOnErr := FALSE;
        END_IF
END_CASE
// Check for inner comms errors, report to EPICS same way
IF NOT bError AND
    (fbCom.eRecvErrorID &lt;&gt; COMERROR_NOERROR
    OR fbCom.eSendErrorID &lt;&gt; COMERROR_NOERROR
    OR fbCom.eRecvErrorID &lt;&gt; COMERROR_NOERROR) THEN
    sError := &#39;Serial Communication Error&#39;;
    bStopOnErr := TRUE;
    nStep := 50;
END_IF
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-xpim-fb-xpim-opal-tcpou-tcplcobject">
<h2>Devices/XPIM/FB_XPIM_Opal.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-xpim-fb-xpim-opal-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-xpim-opal-declaration">
<h3>FB_XPIM_Opal: Declaration<a class="headerlink" href="#fb-xpim-opal-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_Opal
VAR
    {attribute &#39;pytmc&#39; := &#39;
        pv: PWR
        io: io
        ZNAM: OFF
        ONAM: ON
    &#39;}
    bOpalPower AT %Q*: BOOL;
    bOpalInit: BOOL := FALSE;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CIL:PWR
        io: io
        ZNAM: OFF
        ONAM: ON
    &#39;}
    bLedPower AT %Q*: BOOL;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-xpim-opal-st">
<h3>FB_XPIM_Opal: ST<a class="headerlink" href="#fb-xpim-opal-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Turn</span> <span class="n">the</span> <span class="n">Opal</span> <span class="k">on</span> <span class="n">by</span> <span class="n">default</span>
<span class="k">IF</span> <span class="k">NOT</span> <span class="n">bOpalInit</span> <span class="k">THEN</span>
    <span class="n">bOpalPower</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">bOpalInit</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">END_IF</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="devices-xpim-fb-xpim-states-tcpou-tcplcobject">
<h2>Devices/XPIM/FB_XPIM_States.TcPOU (TcPlcObject)<a class="headerlink" href="#devices-xpim-fb-xpim-states-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-xpim-states-declaration">
<h3>FB_XPIM_States: Declaration<a class="headerlink" href="#fb-xpim-states-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_States
VAR_IN_OUT
    stMotionStage: DUT_MotionStage;
END_VAR
VAR_INPUT
    bEnable: BOOL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_PPM_states;
    bStatesLock: BOOL;
    fOut: LREAL;
    fYag: LREAL;
    fDiamond: LREAL;
    fReticle: LREAL;
END_VAR
VAR_OUTPUT
    bError: BOOL;
    sErrorMessage: STRING;
    bBusy: BOOL;
    bDone: BOOL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_XPIM_States;
END_VAR
VAR
    bInit: BOOL;
    arrStates: ARRAY[1..15] OF DUT_PositionState;
    nIter: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv:
        io: io
    &#39;}
    fbStateManager: FB_PositionStateManager;

    fbLockOut: FB_PositionStateLock;
    fbLockYag: FB_PositionStateLock;
    fbLockDiamond: FB_PositionStateLock;
    fbLockReticle: FB_PositionStateLock;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 0.1;
    fOutDelta: LREAL := 10;
    fInVelocity: LREAL := 20;
    fOutVelocity: LREAL := 20;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="fb-xpim-states-st">
<h3>FB_XPIM_States: ST<a class="headerlink" href="#fb-xpim-states-st" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">IF</span> <span class="k">NOT</span> <span class="n">bInit</span> <span class="k">THEN</span>
    <span class="n">bInit</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
    <span class="k">FOR</span> <span class="n">nIter</span> <span class="o">:=</span> <span class="mi">1</span> <span class="k">TO</span> <span class="mi">4</span> <span class="n">DO</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fDelta</span> <span class="o">:=</span> <span class="n">fInDelta</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="n">fInVelocity</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fAccel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">fDecel</span> <span class="o">:=</span> <span class="n">fAccel</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">bLocked</span> <span class="o">:=</span> <span class="n">bStatesLock</span><span class="p">;</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">bValid</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">TODO</span> <span class="n">implement</span> <span class="n">PMPS</span> <span class="n">instead</span> <span class="k">of</span> <span class="n">doing</span> <span class="n">this</span>
        <span class="n">arrStates</span><span class="p">[</span><span class="n">nIter</span><span class="p">].</span><span class="n">bMoveOk</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
    <span class="n">END_FOR</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;Out</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fOut</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fDelta</span> <span class="o">:=</span> <span class="n">fOutDelta</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="n">fOutVelocity</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">fDecel</span> <span class="o">:=</span> <span class="n">fOutDecel</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;Yag</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fYag</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;Diamond</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fDiamond</span><span class="p">;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">sName</span> <span class="o">:=</span> <span class="na">&#39;Reticle</span><span class="p">&#39;;</span>
    <span class="n">arrStates</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fReticle</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="n">fbLockOut</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="n">fbLockYag</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="n">fbLockDiamond</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="n">fbLockReticle</span><span class="p">(</span><span class="n">stPositionState</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>

<span class="n">fbStateManager</span><span class="p">(</span>
    <span class="n">stMotionStage</span> <span class="o">:=</span> <span class="n">stMotionStage</span><span class="p">,</span>
    <span class="n">arrStates</span> <span class="o">:=</span> <span class="n">arrStates</span><span class="p">,</span>
    <span class="n">setState</span> <span class="o">:=</span> <span class="n">enumSet</span><span class="p">,</span>
    <span class="n">bEnable</span> <span class="o">:=</span> <span class="n">bEnable</span><span class="p">,</span>
    <span class="n">bError</span> <span class="o">=&gt;</span> <span class="n">bError</span><span class="p">,</span>
    <span class="n">sErrorMessage</span> <span class="o">=&gt;</span> <span class="n">sErrorMessage</span><span class="p">,</span>
    <span class="n">bBusy</span> <span class="o">=&gt;</span> <span class="n">bBusy</span><span class="p">,</span>
    <span class="n">bDone</span> <span class="o">=&gt;</span> <span class="n">bDone</span><span class="p">,</span>
    <span class="n">getState</span> <span class="o">=&gt;</span> <span class="n">enumGet</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pous-fb-l2si-flowmeter-tcpou-tcplcobject">
<h2>POUs/FB_L2SI_Flowmeter.TcPOU (TcPlcObject)<a class="headerlink" href="#pous-fb-l2si-flowmeter-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-l2si-flowmeter-declaration">
<h3>FB_L2SI_Flowmeter: Declaration<a class="headerlink" href="#fb-l2si-flowmeter-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_L2SI_Flowmeter
VAR
    {attribute &#39;pytmc&#39; := &#39;
        pv: MA
        io: input
    &#39;}
    fRaw AT %I*: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: FLOW
        io: input
    &#39;}
    fFlowRate: LREAL;
END_VAR
</pre></div>
</div>
</div>
</div>
<div class="section" id="pous-fb-xtes-flowswitch-tcpou-tcplcobject">
<h2>POUs/FB_XTES_Flowswitch.TcPOU (TcPlcObject)<a class="headerlink" href="#pous-fb-xtes-flowswitch-tcpou-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fb-xtes-flowswitch-declaration">
<h3>FB_XTES_Flowswitch: Declaration<a class="headerlink" href="#fb-xtes-flowswitch-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XTES_Flowswitch
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: FLOW
        ZNAM: LOW
        ONAM: OK
    &#39;}
    bFlowOk AT %I*: BOOL;
END_VAR
</pre></div>
</div>
</div>
</div>
<div class="section" id="version-global-version-tcgvl-tcplcobject">
<h2>Version/Global_Version.TcGVL (TcPlcObject)<a class="headerlink" href="#version-global-version-tcgvl-tcplcobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="global-version-declaration">
<h3>Global_Version: Declaration<a class="headerlink" href="#global-version-declaration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;TcGenerated&#39;}
{attribute &#39;no-analysis&#39;}
// This function has been automatically generated from the project information.
VAR_GLOBAL CONSTANT
	{attribute &#39;const_non_replaced&#39;}
	{attribute &#39;linkalways&#39;}
	stLibVersion_lcls2_cc_lib : ST_LibVersion := (iMajor := 0, iMinor := 0, iBuild := 0, iRevision := 0, sVersion := &#39;0.0.0&#39;);
END_VAR
</pre></div>
</div>
</div>
</div>
<div class="section" id="symbols">
<h2>Symbols<a class="headerlink" href="#symbols" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="boxes">
<h2>Boxes<a class="headerlink" href="#boxes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="nc-axes">
<h2>NC axes<a class="headerlink" href="#nc-axes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="pragma-lint-results">
<h2>Pragma lint results<a class="headerlink" href="#pragma-lint-results" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="p">:</span><span class="n">pytmc</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">pragmalint</span><span class="p">:</span><span class="n">Total</span> <span class="n">pragmas</span> <span class="n">found</span><span class="p">:</span> <span class="mi">47</span> <span class="n">Total</span> <span class="n">linter</span> <span class="n">errors</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">PLC</span> <span class="n">Project</span> <span class="p">(</span><span class="mi">1</span><span class="p">):</span> <span class="n">Library</span>
<span class="o">========================</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">ENUM_PPM_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_PPM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">5</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_Gige</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM_Gige</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_PowerMeter</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM_PowerMeter</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">10</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">3</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_REF</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF_Laser</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_REF_Laser</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_Filters</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_XPIM_Filters</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_XPIM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">----------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">4</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_FilterWheel</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_FilterWheel</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">5</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_Opal</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_Opal</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">3</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">FB_L2SI_Flowmeter</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_L2SI_Flowmeter</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">FB_XTES_Flowswitch</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XTES_Flowswitch</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Version</span><span class="o">/</span><span class="n">Global_Version</span><span class="o">.</span><span class="n">TcGVL</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------</span>

    <span class="o">-</span> <span class="n">Global_Version</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">4</span> <span class="n">pragmas</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pcdshub/lcls2-cc-lib</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Library.tmc.html">Library.tmc</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PLC Project (1): Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#devices-ppm-enum-ppm-states-tcdut-tcplcobject">Devices/PPM/ENUM_PPM_States.TcDUT (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-ppm-fb-ppm-tcpou-tcplcobject">Devices/PPM/FB_PPM.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-ppm-fb-ppm-gige-tcpou-tcplcobject">Devices/PPM/FB_PPM_Gige.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-ppm-fb-ppm-powermeter-tcpou-tcplcobject">Devices/PPM/FB_PPM_PowerMeter.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-ppm-fb-ppm-states-tcpou-tcplcobject">Devices/PPM/FB_PPM_States.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-ref-fb-ref-tcpou-tcplcobject">Devices/REF/FB_REF.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-ref-fb-ref-laser-tcpou-tcplcobject">Devices/REF/FB_REF_Laser.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-xpim-enum-xpim-filters-tcdut-tcplcobject">Devices/XPIM/ENUM_XPIM_Filters.TcDUT (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-xpim-enum-xpim-states-tcdut-tcplcobject">Devices/XPIM/ENUM_XPIM_States.TcDUT (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-xpim-fb-xpim-tcpou-tcplcobject">Devices/XPIM/FB_XPIM.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-xpim-fb-xpim-filterwheel-tcpou-tcplcobject">Devices/XPIM/FB_XPIM_FilterWheel.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-xpim-fb-xpim-opal-tcpou-tcplcobject">Devices/XPIM/FB_XPIM_Opal.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices-xpim-fb-xpim-states-tcpou-tcplcobject">Devices/XPIM/FB_XPIM_States.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pous-fb-l2si-flowmeter-tcpou-tcplcobject">POUs/FB_L2SI_Flowmeter.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pous-fb-xtes-flowswitch-tcpou-tcplcobject">POUs/FB_XTES_Flowswitch.TcPOU (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-global-version-tcgvl-tcplcobject">Version/Global_Version.TcGVL (TcPlcObject)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#symbols">Symbols</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nc-axes">NC axes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pragma-lint-results">Pragma lint results</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Library.tmc.html" title="previous chapter">Library.tmc</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, SLAC National Accelerator Laboratory.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/lcls2-cc-lib.tsproj.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>